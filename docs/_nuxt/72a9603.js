(window.webpackJsonp=window.webpackJsonp||[]).push([[8,5],{215:function(t,e,n){var content=n(222);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(61).default)("2c2e0b5a",content,!0,{sourceMap:!1})},216:function(t,e,n){"use strict";var r=n(13),o=n(3),l=n(63),c=n(16),h=n(15),d=n(30),m=n(152),f=n(62),v=n(5),_=n(64),x=n(98).f,k=n(34).f,T=n(18).f,y=n(219).trim,C="Number",N=o.Number,I=N.prototype,E=d(_(I))==C,S=function(t){var e,n,r,o,l,c,h,code,d=f(t,!1);if("string"==typeof d&&d.length>2)if(43===(e=(d=y(d)).charCodeAt(0))||45===e){if(88===(n=d.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(d.charCodeAt(1)){case 66:case 98:r=2,o=49;break;case 79:case 111:r=8,o=55;break;default:return+d}for(c=(l=d.slice(2)).length,h=0;h<c;h++)if((code=l.charCodeAt(h))<48||code>o)return NaN;return parseInt(l,r)}return+d};if(l(C,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var w,M=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof M&&(E?v((function(){I.valueOf.call(n)})):d(n)!=C)?m(new N(S(e)),n,M):S(e)},R=r?x(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),O=0;R.length>O;O++)h(N,w=R[O])&&!h(M,w)&&T(M,w,k(N,w));M.prototype=I,I.constructor=M,c(o,C,M)}},217:function(t,e,n){"use strict";n.r(e);n(216),n(44);var r={props:{initialReps:{type:Number,default:10},initialHold:{type:Number,default:10},initialRest:{type:Number,default:5},exercise:{type:String,required:!0}},data:function(){return{reps:0,hold:0,rest:0,saved:!1,savedTimeout:null,savedTimeoutDuration:3e3}},mounted:function(){this.reps=this.initialReps,this.hold=this.initialHold,this.rest=this.initialRest},methods:{save:function(){var t=this;clearTimeout(this.savedTimeout),this.savedTimeout=null,this.reps=Math.max(1,Math.round(this.reps)),this.hold=Math.max(1,Math.round(this.hold)),this.rest=Math.max(1,Math.round(this.rest));var e={reps:Number(this.reps),hold:Number(this.hold),rest:Number(this.rest)};window.localStorage.setItem("settings/".concat(this.exercise),JSON.stringify(e)),this.$emit("onSettingsChange",e),this.saved=!0,this.savedTimeout=setTimeout((function(){t.saved=!1}),this.savedTimeoutDuration)}}},o=(n(221),n(29)),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fieldset",{staticClass:"nhsuk-fieldset"},[t._m(0),t._v(" "),n("div",{staticClass:"nhsuk-form-group"},[n("label",{staticClass:"nhsuk-label",attrs:{for:"reps"}},[t._v("Repetitions")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.reps,expression:"reps"}],staticClass:"nhsuk-input",attrs:{id:"reps",name:"reps",type:"number"},domProps:{value:t.reps},on:{input:function(e){e.target.composing||(t.reps=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"nhsuk-form-group"},[n("label",{staticClass:"nhsuk-label",attrs:{for:"hold"}},[t._v("Number of seconds to hold the position for")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.hold,expression:"hold"}],staticClass:"nhsuk-input",attrs:{id:"hold",name:"hold",type:"number"},domProps:{value:t.hold},on:{input:function(e){e.target.composing||(t.hold=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"nhsuk-form-group"},[n("label",{staticClass:"nhsuk-label",attrs:{for:"rest"}},[t._v("Number of seconds to rest for")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.rest,expression:"rest"}],staticClass:"nhsuk-input",attrs:{id:"rest",name:"rest",type:"number"},domProps:{value:t.rest},on:{input:function(e){e.target.composing||(t.rest=e.target.value)}}})]),t._v(" "),n("div",{staticClass:"settings__save"},[n("button",{staticClass:"nhsuk-button nhsuk-u-margin-bottom-0 nhsuk-u-margin-right-4",on:{click:t.save}},[t._v("Save")]),t._v(" "),t.saved?n("span",{staticClass:"nhsuk-body settings__msg"},[t._v("Saved!")]):t._e()])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("legend",{staticClass:"nhsuk-fieldset__legend nhsuk-fieldset__legend--l"},[n("h1",{staticClass:"nhsuk-fieldset__heading"},[t._v("What do you want this exercises settings to be?")])])}],!1,null,null,null);e.default=component.exports},218:function(t,e,n){var content=n(224);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(61).default)("916143b8",content,!0,{sourceMap:!1})},219:function(t,e,n){var r=n(14),o="["+n(220)+"]",l=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),h=function(t){return function(e){var n=String(r(e));return 1&t&&(n=n.replace(l,"")),2&t&&(n=n.replace(c,"")),n}};t.exports={start:h(1),end:h(2),trim:h(3)}},220:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},221:function(t,e,n){"use strict";n(215)},222:function(t,e,n){var r=n(60)(!1);r.push([t.i,".settings__save{display:flex;align-items:center}.settings__msg{color:#007f3b;font-weight:700}",""]),t.exports=r},223:function(t,e,n){"use strict";n(218)},224:function(t,e,n){var r=n(60)(!1);r.push([t.i,".timer__instruction{display:block}.timer__bar{display:grid;grid-template-columns:auto 1fr auto;grid-gap:1rem;gap:1rem;align-items:center}.timer__progress{height:6px;display:grid}.timer__elapsed{background:#005eb8}.timer__left{background:#aeb7bd}.timer__settings{display:block}.timer__settings:hover{cursor:pointer}",""]),t.exports=r},226:function(t,e,n){"use strict";n.r(e);n(65),n(216),n(44);var r=n(217),o={props:{initialReps:{type:Number,required:!0},initialHold:{type:Number,required:!0},initialRest:{type:Number,default:5},exercise:{type:String,required:!0}},components:{ExerciseSettings:r.default},data:function(){return{reps:0,hold:0,rest:0,isSettingsOpen:!1,defaultInstruction:"When you start the timer the next instruction will be displayed here as well as being spoken to you.",nextInstructionText:"",nextInstructionSpeech:"",voicePitch:1.5,time:0,prepTime:20,nextEventTime:0,eventType:"hold",timer:null,finishedTimer:null}},computed:{percentElapsed:function(){return Math.floor(this.time/this.totalDuration*100)},percentLeft:function(){return 100-this.percentElapsed},totalDuration:function(){return this.prepTime+this.reps*this.hold+(this.reps-1)*this.rest}},mounted:function(){var t=window.localStorage.getItem("settings/".concat(this.exercise));if(t){var e=JSON.parse(t),n=e.reps,r=e.hold,o=e.rest;this.reps=n,this.hold=r,this.rest=o}else this.reps=this.initialReps,this.hold=this.initialHold,this.rest=this.initialRest},methods:{startTimer:function(){var t=this;this.timer||(this.finishedTimeout&&(clearTimeout(this.finishedTimeout),this.finishedTimeout=null),0===this.time&&this.setEvent("prep"),this.timer=setInterval((function(){t.time+=1,t.time!==t.totalDuration?t.time===t.nextEventTime&&("hold"===t.eventType?t.setEvent("rest"):"rest"!==t.eventType&&"prep"!==t.eventType||t.setEvent("hold")):t.onTimerFinished()}),1e3))},pauseTimer:function(){clearInterval(this.timer),this.timer=null},resetTimer:function(){this.nextInstructionText=this.defaultInstruction,clearInterval(this.timer),this.timer=null,this.time=0,this.nextEventTime=0},onTimerFinished:function(){var t=this;this.setNextInstruction("Well done, you have finished this exercise.","Finished"),this.say(),this.pauseTimer(),this.finishedTimeout=setTimeout((function(){return t.resetTimer()}),3e3)},formatTime:function(t){var e=Math.floor(t/60),n=t-60*e,r=e<10?"0".concat(e):e,o=n<10?"0".concat(n):n;return"".concat(r,":").concat(o)},setEvent:function(t){switch(this.eventType=t,t){case"prep":this.nextEventTime+=this.prepTime,this.setNextInstruction("My name is Micky Mouse! You have ".concat(this.prepTime," seconds to get into position."));break;case"hold":this.nextEventTime+=this.hold,this.setNextInstruction("Perform the exercise.","Go");break;case"rest":this.nextEventTime+=this.rest,this.setNextInstruction("Rest for ".concat(this.rest," seconds."),"Rest")}this.say()},setNextInstruction:function(text,t){this.nextInstructionText=text,this.nextInstructionSpeech=t||text},say:function(){var t=new SpeechSynthesisUtterance(this.nextInstructionSpeech);t.pitch=this.voicePitch,speechSynthesis.speak(t)},onSettingsChange:function(t){var e=t.reps,n=t.hold,r=t.rest;this.reps=e,this.hold=n,this.rest=r}}},l=(n(223),n(29)),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("details",{staticClass:"nhsuk-details"},[t._m(0),t._v(" "),n("div",{staticClass:"nhsuk-details__text"},[n("span",{staticClass:"timer__instruction nhsuk-body nhsuk-u-margin-bottom-3"},[t._v(t._s(t.nextInstructionText||t.defaultInstruction))]),t._v(" "),n("div",{staticClass:"timer__bar nhsuk-u-margin-bottom-3"},[n("span",{staticClass:"nhsuk-body"},[t._v(t._s(t.formatTime(t.time)))]),t._v(" "),n("div",{staticClass:"timer__progress",style:"grid-template-columns: "+t.percentElapsed+"% "+t.percentLeft+"%;"},[n("div",{staticClass:"timer__elapsed"}),t._v(" "),n("div",{staticClass:"timer__left"})]),t._v(" "),n("span",{staticClass:"nhsuk-body"},[t._v(t._s(this.formatTime(t.totalDuration)))])]),t._v(" "),n("button",{staticClass:"nhsuk-button",attrs:{disabled:t.timer},on:{click:t.startTimer}},[t._v("Start")]),t._v(" "),n("button",{staticClass:"nhsuk-button nhsuk-button--secondary",on:{click:t.pauseTimer}},[t._v("Pause")]),t._v(" "),n("button",{staticClass:"nhsuk-button nhsuk-button--secondary",on:{click:t.resetTimer}},[t._v("Reset")]),t._v(" "),n("a",{staticClass:"timer__settings nhsuk-link nhsuk-link--no-visited-state nhsuk-u-margin-bottom-3",on:{click:function(e){t.isSettingsOpen=!t.isSettingsOpen}}},[t._v(t._s(t.isSettingsOpen?"Close settings":"Change this exercises settings"))]),t._v(" "),t.isSettingsOpen?n("ExerciseSettings",{attrs:{initialReps:t.reps,initialHold:t.hold,initialRest:t.rest,exercise:t.exercise},on:{onSettingsChange:t.onSettingsChange}}):t._e()],1)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("summary",{staticClass:"nhsuk-details__summary"},[n("span",{staticClass:"nhsuk-details__summary-text"},[t._v(" Timer ")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{ExerciseSettings:n(217).default})}}]);